function startQuiz(quizType) {
  // Charger les départements depuis la config
  fetch('/api/config/departments')
    .then(r => r.json())
    .then(departments => {
      const select = document.getElementById('department');
      select.innerHTML = '<option value="">-- Département --</option>';
      departments.forEach(dept => {
        const option = document.createElement('option');
        option.value = dept;
        option.textContent = dept;
        select.appendChild(option);
      });
      
      // Validation email avec domaines configurés
      return fetch('/api/config');
    })
    .then(configResp => configResp.json())
    .then(config => {
      const email = document.getElementById('email').value.trim();
      const department = document.getElementById('department').value;
      
      // Validation email
      const allowedDomains = config.emailDomains || ['telecom-paris.fr', 'imt.fr'];
      const emailDomain = email.split('@')[1];
      const isValidDomain = allowedDomains.some(domain => 
        emailDomain === domain || emailDomain.endsWith('.' + domain)
      );
      
      if (!email || !department || !isValidDomain) {
        alert("Veuillez entrer un email et un département valides");
        return;
      }
      
      // ... reste de la logique ...
    });
}
